<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Robotics Launcher</title>
<link rel="icon" href="favicon.ico">
<link rel="stylesheet" href="style.css">
</head>
<body>
<div class="wrap" id="launcher">
  <header>
    <div class="title">
      <div class="logo"><span>RL</span></div>
      <div>
        <div style="font-weight:700; font-size:24px">Robotics Launcher</div>
        <div class="subtitle">Embedded CN Academies + SPIKE 3 & Ozobot.</div>
      </div>
    </div>
    <div class="tag">Fullscreen friendly</div>
  </header>

  <main class="grid">
    <!-- CN Academies -->
    <section class="card">
      <div>
        <div class="pill"><div class="icon cn">C</div> Code Ninjas Academies</div>
        <h2>CN Academies</h2>
        <p>Embedded Code Ninjas Academies page.</p>
      </div>
      <div class="actions">
        <button class="btn legacy" onclick="openEmbed('https://academies.codeninjas.com/')">Open Academies</button>
        <button class="btn" onclick="copyUrl('https://academies.codeninjas.com/')">Copy URL</button>
      </div>
    </section>

    <div class="sep"></div>

    <!-- SPIKE 3 -->
    <section class="card">
      <div>
        <div class="pill"><div class="icon s">S</div> LEGO® SPIKE Prime 3</div>
        <h2>SPIKE 3</h2>
        <p>This editor cannot be embedded. Click launch to open full editor in a controlled popup.</p>
      </div>
      <div class="actions">
        <button class="btn primary" onclick="openTool('https://spike.legoeducation.com/prime/lobby')">Launch SPIKE</button>
      </div>
    </section>

    <div class="sep"></div>

    <!-- Ozobot -->
    <section class="card">
      <div>
        <div class="pill"><div class="icon o">O</div> Ozobot Blockly</div>
        <h2>Ozobot</h2>
        <p>This editor cannot be embedded. Click launch to open full editor in a controlled popup.</p>
      </div>
      <div class="actions">
        <button class="btn ozobot" onclick="openTool('https://ozoblockly.com/editor')">Launch Ozobot</button>
      </div>
    </section>
  </main>
</div>

<!-- Embedded iframe + home button -->
<button id="homeBtn" onclick="closeEmbed()">Home</button>
<iframe id="embedFrame"></iframe>

<script>
const iframe=document.getElementById('embedFrame');
const homeBtn=document.getElementById('homeBtn');
const launcher=document.getElementById('launcher');

function openEmbed(url){
  iframe.src=url; 
  iframe.style.display='block'; 
  homeBtn.style.display='block'; 
  launcher.style.display='none';
}
function closeEmbed(){
  iframe.src=''; 
  iframe.style.display='none'; 
  homeBtn.style.display='none'; 
  launcher.style.display='flex';
}

async function copyUrl(url){ 
  try{ await navigator.clipboard.writeText(url); } 
  catch{ prompt('Copy this URL:',url);}
}

// Open SPIKE/Ozobot in controlled popup
function openTool(url){
  const popupName = "kiosk_" + (new URL(url)).hostname.replace(/\W/g,'_');
  const features = "width=1200,height=800,toolbar=no,menubar=no,location=no,status=no,resizable=yes";
  const win = window.open(url, popupName, features);
  if(!win) return;
}

// Silent Shift×5 admin exit
let shiftCount = 0;
let lastShift = 0;
document.addEventListener("keydown", e=>{
  const now = Date.now();
  if(e.key === "Shift"){
    if(now - lastShift < 800) shiftCount++; else shiftCount=1;
    lastShift=now;
    if(shiftCount>=5){
      window.close();
    }
  }
});
</script>
</body>
</html>
